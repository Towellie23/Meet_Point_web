{% extends 'base.html' %}

{% block title %}{{ event.title }}{% endblock %}

{% block content %}
<div class="container">
    <h1>{{ event.title }}</h1>
    {% if event.headline_image %}
        <div class="mb-4">
          <h3>Заглавное изображение</h3>
          <img src="{{ event.headline_image.url }}" class="img-fluid" alt="Заглавное изображение {{ event.title }}">
        </div>
      {% endif %}
    <p><strong>Описание:</strong> {{ event.description }}</p>
    <p><strong>Дата и время:</strong> {{ event.date|date:"d M Y H:i" }}</p>
    <p><strong>Место встречи:</strong> {{ event.location }}</p>
    <p><strong>Организатор:</strong> {{ event.organizer.username }}</p>

    <p>
        <strong>Категории:</strong>
        {% for category in event.categories.all %}
          <span class="badge badge-info">{{ category.name }}</span>
        {% empty %}
          <span>Без категории</span>
        {% endfor %}
      </p>



    {% if event.extra_images.all %}
        <div class="mb-4">
          <h3>Дополнительные изображения</h3>
          <div class="row">
            {% for extra in event.extra_images.all %}
              <div class="col-md-4 mb-3">
                <img src="{{ extra.image.url }}" class="img-fluid" alt="Дополнительное изображение">
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}

    {% if user.is_authenticated %}
        <a href="{% url 'participate_event' event.id %}" class="btn btn-success">
            Зарегистрироваться / Отменить участие
        </a>
    {% else %}
        <p><a href="{% url 'login' %}">Войдите</a>, чтобы принять участие.</p>
    {% endif %}

    <hr>
    <h3>Участники</h3>
    <ul class="list-group">
        {% for participation in participants %}
            <li class="list-group-item">{{ participation.user.username }}</li>
        {% empty %}
            <li class="list-group-item">Пока нет участников.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
